<!DOCTYPE html>
<html style="background-color:black;" onkeydown="processKeyInner(event)" id="html" onfocusout="javascript:document.getElementById('html').focus()">
<!-- TODO: implement clear command. -->
<head style="background-color:black">
	<title>alexfortis.github.io - bash</title>
	<!--<style type="text/css">
    	textarea { border: none; outline: none;}
	</style>-->
	<br><br>
	<div id="instructions" style="background-color:black; position:fixed; width:100vw; z-index:999; height:30px; top:40px">
		<p style="background-color:black;color:#00ff00;font-family:Courier;font-size:14px;padding-bottom:8px">This is my resume page. Type "help" to see a list of commands.</p></div>
  </head>
<body style="background-color:black" id="body" onclick="javascript:document.getElementById('cmd').focus()">
	<script>
		document.body.style.overflow="hidden";
	</script>
	<div id="terminal" style="width:100vw;height:calc(100vh - 80px);background-color:black;overflow-y:auto;top:80px;">
		<br><br>
		<script>
			//queue
			function Queue() {
			    this._oldestIndex = 1;
			    this._newestIndex = 1;
			    this._storage = {};
			}
			 
			Queue.prototype.size = function() {
			    return this._newestIndex - this._oldestIndex;
			};
			 
			Queue.prototype.enqueue = function(data) {
			    this._storage[this._newestIndex] = data;
			    this._newestIndex++;
			};
			 
			Queue.prototype.dequeue = function() {
			    var oldestIndex = this._oldestIndex,
			        newestIndex = this._newestIndex,
			        deletedData;
			 
			    if (oldestIndex !== newestIndex) {
			        deletedData = this._storage[oldestIndex];
			        delete this._storage[oldestIndex];
			        this._oldestIndex++;
			 
			        return deletedData;
			    }
			};


			//tree
			function Node(data) {
			    this.data = data;
			    this.parent = null;
			    this.children = [];
			}

			function Tree(data) {
			    var node = new Node(data);
			    this._root = node;
			}

			Tree.prototype.traverseDF = function(callback) {
			 
			    // this is a recurse and immediately-invoking function 
			    (function recurse(currentNode) {
			        // step 2
			        for (var i = 0, length = currentNode.children.length; i < length; i++) {
			            // step 3
			            recurse(currentNode.children[i]);
			        }
			 
			        // step 4
			        callback(currentNode);
			         
			        // step 1
			    })(this._root);
			 
			};

			Tree.prototype.traverseBF = function(callback) {
			    var queue = new Queue();
			     
			    queue.enqueue(this._root);
			 
			    currentTree = queue.dequeue();
			 
			    while(currentTree){
			        for (var i = 0, length = currentTree.children.length; i < length; i++) {
			            queue.enqueue(currentTree.children[i]);
			        }
			 
			        callback(currentTree);
			        currentTree = queue.dequeue();
			    }
			};

			Tree.prototype.contains = function(callback, traversal) {
			    traversal.call(this, callback);
			};

			Tree.prototype.add = function(data, toData, traversal) {
			    var child = new Node(data),
			        parent = null,
			        callback = function(node) {
			            if (node.data === toData) {
			                parent = node;
			            }
			        };
			 
			    this.contains(callback, traversal);
			 
			    if (parent) {
			        parent.children.push(child);
			        child.parent = parent;
			    } else {
			        throw new Error('Cannot add node to a non-existent parent.');
			    }
			};

			Tree.prototype.remove = function(data, fromData, traversal) {
			    var tree = this,
			        parent = null,
			        childToRemove = null,
			        index;
			 
			    var callback = function(node) {
			        if (node.data === fromData) {
			            parent = node;
			        }
			    };
			 
			    this.contains(callback, traversal);
			 
			    if (parent) {
			        index = findIndex(parent.children, data);
			 
			        if (index === undefined) {
			            throw new Error('Node to remove does not exist.');
			        } else {
			            childToRemove = parent.children.splice(index, 1);
			        }
			    } else {
			        throw new Error('Parent does not exist.');
			    }
			 
			    return childToRemove;
			};

			function findIndex(arr, data) {
			    var index;
			 
			    for (var i = 0; i < arr.length; i++) {
			        if (arr[i].data === data) {
			            index = i;
			        }
			    }
			 
			    return index;
			}

			//set up leaf nodes
			var bing = {
				name: "bing.txt",
				type: "txt",
				catput: "Binghamton University (SUNY) - 2013-2017<br>Bachelor of Science in Computer Science and Bachelor of Science in Mathematics, expected May 2017<br>Minor in Music<br>GPA: 3.54/4.00<br>Dean's List: Spring 2014, Spring 2015, Fall 2015<br>IBM/Watson Fellows Scholar, each fall since 2013 (annual award)<br>Upsilon Pi Epsilon honor society member since December 2014, chapter treasurer since April 2015<br>Pi Mu Epsilon honor society member since April 2015<br>CS Courses:<ul><li>Pre-Registered for Fall 2016: <ul><li>CS451 (Systems Programming)</li><li>CS436 (Machine Learning)</li></ul></li><li>Current: <ul><li>CS471 (Programming Languages)</li><li>CS440 (Advanced Topics in Object Oriented Programming)</li></ul></li><li>Past: <ul><li>CS373 (Automata Theory and Formal Languages)</li><li>CS350 (Operating Systems)</li><li>CS375 (Design and Analysis of Algorithms)</li><li>CS320 (Computer Systems III: Advanced Computer Architecture)</li><li>CS240 (Data Structures and Algorithms)</li><li>CS220 (Computer Systems II: Architecture and Programming)</li><li>CS140 (Programming with Objects)</li><li>CS120 (Computer Systems I: Machine Organization)</li></ul></li></ul>Math Courses: <ul><li>Pre-Registered for Fall 2016: <ul><li>MATH401 (Modern Algebra I)</li></ul></li><li>Current: <ul><li>MATH404 (Advanced Linear Algebra)</li></ul></li><li>Past: <ul><li>MATH461 (Topology I)</li><li>MATH479 (Real Analysis II)</li><li>MATH478 (Real Analysis I)</li><li>MATH375 (Functions of Complex Variables)</li><li>MATH330 (Number Systems)</li><li>MATH323 (Calculus III)</li><li>MATH304 (Linear Algebra)</li></ul></li></ul>",
				//lines: 17
			};
			var bxsci = {
				name: "bxsci.txt",
				type: "txt",
				catput: "Bronx High School of Science, class of 2013<br>qualified for 2013 AIME<br>won the Samuel Greitzer computer science award<br>Treasurer of Latin Club; played in the jazz band<br>Freshman, Sophomore, and Junior Math Team",
				//lines: 4
			};
			var jyard = {
				name: "juilliard.txt",
				type: "txt",
				catput: "The Juilliard School, Pre-College Division, class of 2013<br>Studied composition under Manuel Sosa; took courses in music theory, counterpoint, and ear training<br>Senior recital on April 27th, 2013",
				//lines: 2
			};
			var nyspi = {
				name: "nyspi.txt",
				type: "txt",
				catput: "New York State Psychiatric Institute (NYSPI) at Columbia University Medical Center<br>PsyIT Volunteer<ul><li>Encrypted computers with BitLocker</li><li>Wrote a software tool in Java to help determine, from Excel sheets, which computers should be banned from the network</li></ul>",
				//lines: 6
			};
			var strongLanguages = {
				name: "strong.txt",
				type: "txt",
				catput: "Java, C++, C",
				//lines: 1
			};
			var familiarLanguages = {
				name: "familiar.txt",
				type: "txt",
				catput: "SWI-Prolog, C#, Python, x86 and MIPS assembly, HTML, CSS, JavaScript",
				//lines: 1
			};
			var software = {
				name: "software.txt",
				type: "txt",
				catput: "Emacs, Eclipse, Git, UNIX Terminal",
				//lines: 1
			};
			var otherSkills = {
				name: "other.txt",
				type: "txt",
				catput: "Other skills:<br>Latin; vibraphone (and other percussion), piano, electric bass; composing, arranging, Sibelius 5, Sibelius 7", //lines: 3
			};
			var OS = {
				name: "os.txt",
				type: "txt",
				catput: "Operating Systems:<br>Experience using Mac OS X, Linux (Ubuntu, Debian), Windows",
				//lines: 2
			};
			var acm = {
				name: "acm.txt",
				type: "txt",
				catput: "ACM Projects Division<br>Develop a website, as project manager, similar to ratemyprofessors.com, but for classes<ul><li>Should include an interactive graphical prerequisite flowchart</li></ul>",
				//lines: 3
			};
			var competitions = {
				name: "competitions.txt",
				type: "txt",
				catput: "Programming Competitions:<ul><li>Binghamton ACM February 2016 competition (sponsored by Bloomberg): won 2nd place</li><li>HackerRank World Cup - University Level CodeSprint (September 2015): Qualified for Semifinals</li><li>Binghamton ACM September 2015 competition (sponsored by Bloomberg): placed 18th</li></ul>",
				//lines: 6
			};
			var pennappsXI = {
				name:"pennappsXI.txt",
				type: "txt",
				catput: "<ul><li>Built, with a team, a website that sped up updates by using bytewise subtraction rather than deleting and rewriting</li><li>Top 30 team</li></ul>",
				//lines: 2
			};
			var contact = {
				name:"contact.txt",
				type: "txt",
				catput: "Personal Email: alex.j.strong+website@gmail.com<br>School E-mail: astrong3+website@binghamton.edu<br>LinkedIn: https://linkedin.com/in/strongalexander<br>GitHub Username: alexfortis",
				//lines: 4
			};
			var rescon = {
				name:"rescon.txt",
				type: "txt",
				catput:"Resident Computer Consultant (Binghamton University ITS)<br><ul><li>Provide technical support to students on campus, helping them resolve questions and issues about device connectivity and software problems</li><li>Staff the IT help desk at the Glenn G. Bartle library</li></ul>",
			};
			var otherExperiences = {
				name: "other.txt",
				type: "txt",
				catput: "<ul><li>Upsilon Pi Epsilon volunteer tutor for various math and CS courses such as calculus, discrete math, data structures, algorithms, automata theory</li><li>Binghamton University Student Athlete Success Center tutor - Calculus III</li><li>Harpur Jazz Ensemble vibraphonist/pianist</li><li>Binghamton University Percussion Ensemble percussionist</li></ul>",
			};

			//now, set up stuff from the top down
			var rootDir = {
				name: "resume",
				type: "dir",
				catput: "cat: resume: Is a directory",
				//lines: 1
			};
			var skills = {
				name: "skills",
				type: "dir",
				catput: "cat: skills: Is a directory",
				//lines: 1
			};
			var education = {
				name: "education",
				type: "dir",
				catput: "cat: education: Is a directory",
				//lines: 1
			};
			var experiences = {
				name: "experiences",
				type: "dir",
				catput: "cat: experiences: Is a directory",
				//lines: 1
			};
			var languages = {
				name: "languages",
				type: "dir",
				catput: "cat: languages: Is a directory",
				//lines: 1
			};

			var tree = new Tree(rootDir);
			tree.add(contact, rootDir, tree.traverseBF);
			tree.add(education, rootDir, tree.traverseBF);
			tree.add(experiences, rootDir, tree.traverseBF);
			tree.add(skills, rootDir, tree.traverseBF);
			tree.add(bing, education, tree.traverseBF);
			tree.add(bxsci, education, tree.traverseBF);
			tree.add(jyard, education, tree.traverseBF);
			tree.add(languages, skills, tree.traverseBF);
			tree.add(familiarLanguages, languages, tree.traverseDF);
			tree.add(strongLanguages, languages, tree.traverseDF);
			tree.add(OS, skills, tree.traverseDF);
			tree.add(otherSkills, skills, tree.traverseDF);
			tree.add(software, skills, tree.traverseDF);
			tree.add(acm, experiences, tree.traverseBF);
			tree.add(competitions, experiences, tree.traverseBF);
			tree.add(nyspi, experiences, tree.traverseBF);
			tree.add(otherExperiences, experiences, tree.traverseBF);
			tree.add(pennappsXI, experiences, tree.traverseBF);
			tree.add(rescon, experiences, tree.traverseBF);

			var numCmds = 0;
			var cmds = [];
			var outs = [];
			var currDir = tree._root;

			//found this here: http://www.javascripter.net/faq/browsern.htm
			function getAppName() {
				var nVer = navigator.appVersion;
				var nAgt = navigator.userAgent;
				var browserName  = navigator.appName;
				var fullVersion  = ''+parseFloat(navigator.appVersion); 
				var majorVersion = parseInt(navigator.appVersion,10);
				var nameOffset,verOffset,ix;

				// In Opera 15+, the true version is after "OPR/" 
				if ((verOffset=nAgt.indexOf("OPR/"))!=-1) {
				 browserName = "Opera";
				 fullVersion = nAgt.substring(verOffset+4);
				}
				// In older Opera, the true version is after "Opera" or after "Version"
				else if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
				 browserName = "Opera";
				 fullVersion = nAgt.substring(verOffset+6);
				 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
				   fullVersion = nAgt.substring(verOffset+8);
				}
				// In MSIE, the true version is after "MSIE" in userAgent
				else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
				 browserName = "Microsoft Internet Explorer";
				 fullVersion = nAgt.substring(verOffset+5);
				}
				// In Chrome, the true version is after "Chrome" 
				else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
				 browserName = "Chrome";
				 fullVersion = nAgt.substring(verOffset+7);
				}
				// In Safari, the true version is after "Safari" or after "Version" 
				else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
				 browserName = "Safari";
				 fullVersion = nAgt.substring(verOffset+7);
				 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
				   fullVersion = nAgt.substring(verOffset+8);
				}
				// In Firefox, the true version is after "Firefox" 
				else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
				 browserName = "Firefox";
				 fullVersion = nAgt.substring(verOffset+8);
				}
				// In most other browsers, "name/version" is at the end of userAgent 
				else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
				          (verOffset=nAgt.lastIndexOf('/')) ) 
				{
				 browserName = nAgt.substring(nameOffset,verOffset);
				 fullVersion = nAgt.substring(verOffset+1);
				 if (browserName.toLowerCase()==browserName.toUpperCase()) {
				  browserName = navigator.appName;
				 }
				}
				// trim the fullVersion string at semicolon/space if present
				if ((ix=fullVersion.indexOf(";"))!=-1)
				   fullVersion=fullVersion.substring(0,ix);
				if ((ix=fullVersion.indexOf(" "))!=-1)
				   fullVersion=fullVersion.substring(0,ix);

				majorVersion = parseInt(''+fullVersion,10);
				if (isNaN(majorVersion)) {
				 fullVersion  = ''+parseFloat(navigator.appVersion); 
				 majorVersion = parseInt(navigator.appVersion,10);
				}
				return browserName;
			}
			var app = getAppName(); //not going to change, so why go through that method more than once?

			function getPrompt() {
				var curr = "";
				for(var dir = currDir; dir.parent; dir = dir.parent) {
					curr = "/" + dir.data.name + curr;
				}
				curr = "~"+ curr;
				return app + "@alexfortis.github.io:" + curr + "$&nbsp";
			}
			var prompt = getPrompt();
			var promptBox = document.getElementById("prompt");
			//promptBox.innerHTML = prompt;

			function cleanUp(fileName) {
				fileName = fileName.trim();
				//alert(fileName);
				var dirs = fileName.split("/");
				var newDirs = new Array();
				var ret = fileName;
				if(dirs.length > 0) {
					for(var i = 0; i < dirs.length; i++) {
						if(dirs[i] !== ".") {
							if(dirs[i] === "..") {
								newDirs.pop();
							}
							else {
								newDirs.push(dirs[i]);
							}
						}
					}
					if(newDirs.length > 0) {
						ret = newDirs[0];
						for(var i = 1; i < newDirs.length; i++) {
							ret += newDirs[i];
						}
						//alert(ret);
					}
					else {
						ret = "";
					}
				}
				return ret;
			}

			var numUp = 0;
			var reused = [];

			function moveCursorToEnd(el) {
				var len = el.value.length;
				el.setSelectionRange(len, len);
			}

			function getLast(str) {
				var spl = str.split("/");
				return spl[spl.length-1];
			}

			//return true iff str1 starts with str2
			function startsWith(str1, str2) {
				if(str2.length > str1.length) return false;
				for(var i = 0; i < str2.length; i++) {
					if(str1[i] !== str2[i]) return false;
				}
				return true;
			}

			function concat(arr, delim) {
				var ret = "";
				for(var i = 0; i < arr.length; i++) {
					ret += arr[i];
					if(i+1 < arr.length) ret += delim;
				}
				return ret;
			}

			function processTab(e, textarea) {
				var code = (e.keyCode || e.which);
				var cmd = document.getElementById("cmd");
				cmd.focus();
				if(code === 9) {
					var args = cmd.value.split(" ");
					if(args.length > 1) {
						if(args[0] == "ls" || args[0] == "cat" || args[0] == "cd") {
							var matches = [];
							var spl = args[args.length-1].split("/");
							var dir = currDir;
							for(var i = 0; i < spl.length-1; i++) {
								for(var j = 0; j < dir.children.length; j++) {
									if(dir.children[j].data.name === spl[i]) {
										dir = dir.children[j];
									}
								}
							}
							for(var i = 0; i < dir.children.length; i++) {
								//alert(dir.children[i].data.name);
								if(startsWith(dir.children[i].data.name, spl[spl.length-1].trim())) {
									matches[matches.length] = i;
								}
							}
							//alert(matches.length);
							if(matches.length == 1) {
								spl[spl.length-1] = dir.children[matches[0]].data.name;
								args[args.length-1] = concat(spl, "/");
								if((dir.children[matches[0]]).data.type === "dir") args[args.length-1] += "/";
								cmd.value = concat(args, " ");
							}
							else if(matches.length > 1) {
								var term = document.getElementById("terminal");
								var old = document.getElementById("old");
								var matchesAsString = "";
								for(var i = 0; i < matches.length; i++) {
									//alert(currDir.children[matches[i]].data.name);
									matchesAsString = (matchesAsString + "&nbsp;&nbsp;&nbsp;&nbsp;" + dir.children[matches[i]].data.name).trim() + (((dir.children[matches[i]]).data.type === "dir")?("/"):(""));
								}
								//alert(matchesAsString);
								cmd.value = cmd.value.trim();
								old.innerHTML += "<table style=\"width:100%\"><tr><td id=\"promptCell"+numCmds+"\" style=\"white-space:nowrap\"><div id=\"prompt"+numCmds+"\" style=\"background-color:black;color:#00ff00;font-family:Courier;font-size:14px;resize: none;width:" + document.getElementById("promptCell").offsetWidth + "\">"+prompt+"</div></td><td id=\"cmdCell"+numCmds+"\" width=" + document.getElementById("cmdCell").width + "><div contenteditable=\"false\" id=\"cmd"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100%;font-family:Courier;font-size:14px;resize: none;\" rows=1>"+cmd.value+"</div><script> document.getElementById(\"cmdCell"+numCmds+"\").width = window.innerWidth - document.getElementById(\"promptCell"+numCmds+"\").width; <"+"/script></td></tr></table>";
								old.innerHTML += "<div contenteditable=\"false\" id=\"output"+numCmds+"\" rows=1 style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier;font-size:14px;resize: none;\"></div>";
								var lastOut = document.getElementById("output"+numCmds);
								lastOut.innerHTML = matchesAsString;
								outs[outs.length] = matchesAsString;
								var kids = old.childNodes;
			 					var j = 0, k = 0;
								for(var i = 0; i < kids.length; i++) {
									if(kids[i].id.substring(0,6) == "output") {
										kids[i].value = outs[j];
										j++;
									}
									else if(kids[i].id.substring(0,3) == "cmd") {
										kids[i].rows = 1;
										kids[i].value = cmds[k];
										k++;
									}
								}
								numCmds++;
							}
							else {
								cmd.value = cmd.value.trim();
								//TODO: implement autocompletion for commands (or do I need this...?)
							}
						}
					}
					cmd.focus();

				}
			}

			function processKeyInner(e) {
				var code = e.keyCode || e.which;
				//escape
				if(code === 27) {
					var nice = document.getElementById("resume-nice");
					if(nice) {
						nice.parentNode.removeChild(nice);
						document.getElementById("cmd").value = "";
					}
				}
			}

			function processEnter(e, textarea) {
				var code = e.keyCode || e.which;
				if(code == 13 && textarea.value.trim().length > 0) {
   					numUp = 0;
   					reused = [];
					cmd.value = cmd.value.trim();
					var term = document.getElementById("terminal");
					var old = document.getElementById("old");
					old.innerHTML += "<table style=\"width:100%\"><tr><td id=\"promptCell"+numCmds+"\" style=\"white-space:nowrap\"><div id=\"prompt"+numCmds+"\" style=\"background-color:black;color:#00ff00;font-family:Courier;font-size:14px;font-size:14px;resize: none;width:" + document.getElementById("promptCell").offsetWidth + "\">"+prompt+"</div></td><td id=\"cmdCell"+numCmds+"\" width=" + document.getElementById("cmdCell").width + "><div contenteditable=\"false\" id=\"cmd"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100%;font-family:Courier;font-size:14px;font-size:14px;resize: none;\" rows=1>"+cmd.value+"</div><script> document.getElementById(\"cmdCell"+numCmds+"\").width = window.innerWidth - document.getElementById(\"promptCell"+numCmds+"\").width; <"+"/script></td></tr></table>";
					var prevCmd = document.getElementById("cmd"+numCmds);
					var kids = old.childNodes;
					cmds[cmds.length] = cmd.value;
					if(cmd.value.substring(0,2) != "cd" && cmd.value != "view") {
						old.innerHTML += "<div contenteditable=\"false\" id=\"output"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier;font-size:14px;font-size:14px;resize: none;\"></div>";
						var lastOut = document.getElementById("output"+numCmds);
						kids = old.childNodes;
						if(cmd.value == "help") {
							var url = "http://www.w3schools.com/jsref/jsref_obj_regexp.asp";
							//lastOut.rows = 8;
							lastOut.innerHTML = "<table style=\"border:none;padding-left:30px\"><tr><td>view:</td><td style=\"padding-left:30px\">view my resume in a nicer-looking format</td></tr><tr><td>ls:</td><td style=\"padding-left:30px\">list all files and directories in this directory</td></tr><tr><td>cd [directory_name]:</td><td style=\"padding-left:30px\">change to the given directory</td></tr><tr><td>cat [filename]:</td><td style=\"padding-left:30px\">print the contents of a given file</td></tr><tr><td>pwd:</td><td style=\"padding-left:30px\">print the path of the current working directory</td></tr><tr><td>help:</td><td style=\"padding-left:30px\">show this help dialog</td></tr></table><br>&nbsp;&nbsp;&nbsp;&nbsp;You can use JavaScript regular expressions (reference: <span onclick=\"javascript:parent.window.open(\'"+url+"\')\" contenteditable=\"false\" style=\"background-color:black;color:#00ff00;width:100%;font-family:Courier;font-size:14px;font-size:14px;resize: none;text-decoration: underline;cursor: pointer;\"><a href=\""+url+"\" target=\"_blank\" style=\"color:#00ff00\">"+url+"</a></span>) in file names and paths.<br><br>"
						}
						else if(cmd.value == "ls") {
							//lastOut.rows = currDir.children.length;
							lastOut.innerHTML = currDir.children[0].data.name;
							for(var i = 1; i < currDir.children.length; i++) {
								lastOut.innerHTML += "<br>" + currDir.children[i].data.name;
							}
						}
						else if(cmd.value.substring(0,3) === "ls ") {
							//lastOut.rows = 1;
							var fileName = cmd.value.substring(3);
							var dir = currDir;
							var path = fileName.split("/");
							while(path[path.length] === "") path.pop();
							var out = "ls: " + fileName + ": No such file or directory.";
							var isDir = true;
							var isFile = false;
							var regexp;
							var matches = [];
							if(path.length > 0) {
								for(var i = 0; i < path.length; i++) {
									//alert(path[i]);
									if(path[i] === "") break;
									regexp = new RegExp(path[i]);
									//alert("path: " + path[i] + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regexp: " + regexp);
									if(i === 0 && path[i] === "~") {
										dir = tree._root;
									}
									else if(path[i] == "..") {
										if(dir.parent) {
											dir = dir.parent;
										}
										else break;
									}
									else if(path[i] !== ".") {
										if(dir.data.type === "dir") {
											//alert(dir.data.name + " is a dir");
											for(var j = 0; j < dir.children.length; j++) {
												//alert("dir.children[" + j + "]: " + dir.children[j].data.name);
												//alert("\"" + regexp.exec(dir.children[j].data.name) + "\"");
												if(regexp.exec(dir.children[j].data.name) !== null) {
													//alert(dir.children[j].data.name + " matches " + regexp);
													matches[matches.length] = dir.children[j];
												}
												else {
													//alert(dir.children[j].data.name + " does not match " + regexp);
												}
											}
											//alert("There are " + matches.length + " matches.");
											if(matches.length > 1) {
												isDir = false;
												out = "";
												out = matches[0].data.name;
												for(var j = 1; j < matches.length; j++) {
													out += "<br>" + matches[j].data.name;
													//lastOut.rows++;
												}
											}
											else if(matches.length === 1) {
												//alert("dir is now " + matches[0].data.name);
												dir = matches[0];
												if(dir.data.name !== path[i]) {
													isDir = false;
													if(i === path.length-1) isFile = true;
												}
											}
										}
										else {
											//isDir = false;
											//alert(dir.data.name + " is not a dir; i == " + i + ", path.length == " + path.length);
											if(i+1 === path.length) {
												//alert("is a file!");
												isFile = true;
											}
											else break;
										}
									}
									matches = [];
								}
								if(isDir) {
									if(dir.children.length > 0) {
										out = dir.children[0].data.name;
									}
									for(var i = 1; i < dir.children.length; i++) {
										out += "<br>" + dir.children[i].data.name;
										//lastOut.rows++;
									}
								}
								else if(isFile) {
									out = dir.data.name;
								}
							}
							lastOut.innerHTML = out;
						}
						else if(cmd.value === "cat") {
							//lastOut.rows = 1;
							lastOut.innerHTML = "cat: Please specify the file"
						}
						else if(cmd.value.substring(0,4) === "cat ") {
							//lastOut.rows = 1;
							var fileName = cmd.value.substring(4);
							var dir = currDir;
							var path = fileName.split("/");
							var out = "cat: "+fileName+": No such file or directory."
							var isDir = true;
							var regexp;
							var matches = [];
							if(path.length > 0) {
								var len = path.length;
								for(var i = 0; i < path.length-1; i++) {
									//alert(path[i]);
									if(path[i+1] === "") {
										len = i+1;
										break;
									}
									regexp = new RegExp(path[i]);
									//alert(regexp);
									if(i === 0 && path[i] === "~") {
										dir = tree._root;
									}
									else if(path[i] == "..") {
										if(dir.parent) {
											dir = dir.parent;
										}
										else break;
									}
									else if(path[i] != ".") {
										//alert("checking contents of directory " + dir.data.name);
										if(dir.data.type === "dir") {
											for(var j = 0; j < dir.children.length; j++) {
												//alert("checking " + dir.children[j].data.name);
												if(regexp.test(dir.children[j].data.name)) {
													matches[matches.length] = dir.children[j];
													//alert("found a match: " + dir.data.name);
												}
											}
											if(matches.length === 1) {
												dir = matches[0];
											}
											else if(matches.length > 1) {
												isDir = false;
												out = filename + ": There are too many matches.";
											}
										}
										else {
											isDir = false;
											break;
										}
									}
									matches = [];
								}
								if(isDir) {
									regexp = new RegExp(path[len-1]);
									var theFile = undefined;
									if(path.length === 1 && path[0] === "~") {
										theFile = dir.data;
									}
									else if(path[len-1] === ".") {
										theFile = dir.data;
									}
									else if(path[len-1] === "..") {
										theFile = dir.parent.data;
									}
									else {
										for(var i = 0; i < dir.children.length; i++) {
											if(regexp.test(dir.children[i].data.name)) {
												matches[matches.length] = dir.children[i].data;
											}
										}
										if(matches.length === 1) {
											theFile = matches[0];
										}
									}
									if(theFile !== undefined) {
										//lastOut.rows = theFile.lines;
										out = theFile.catput;
									}
									else if(matches.length > 1) {
										//lastOut.rows = 0;
										out = "";
										for(var i = 0; i < matches.length; i++) {
											//lastOut.rows += matches[i].lines;
											out += matches[i].catput + "<br>";
										}
									}
								}
							}
							lastOut.innerHTML = out;
						}
						else if(cmd.value === "pwd") {
							var curr = "";
							for(var dir = currDir; dir.parent; dir = dir.parent) {
								curr = "/" + dir.data.name + curr;
							}
							curr = "alexfortis.github.io/resume" + curr;
							//lastOut.rows = 1;
							lastOut.innerHTML = curr;
						}
						else {
							//lastOut.rows = 1;
							lastOut.innerHTML = "-bash: " + cmd.value.split(" ")[0] + ": command not found"
						}
						outs[outs.length]=lastOut.innerHTML;
					}
					else if(cmd.value == "view") {
						//window.open("resume.html", "_blank");
						var frame = document.createElement("IFRAME");
						frame.src = "resume-nice.html";
						frame.id = "resume-nice";
						frame.style.width = document.getElementById("body").style.width;
						var h = "calc(100vh - 90px)";
						var d = "calc(90px - 100vh)";
						if(getAppName() === "Firefox") {
							h = "calc(100vh - 105px)";
							d = "calc(105px - 100vh)";
						}
						var w = "100vw";
						frame.style.height = h;
						frame.style.width = w;
						frame.style.position="relative";
						frame.style.top = d;
						x = document.getElementById('html');
						frame.sandbox = "allow-same-origin allow-scripts allow-top-navigation";
						/*frame.onload = function() {
							//alert(frame.sandbox);
							//alert('hey there!');
							frame.contentWindow.document.getElementById('html').onfocus = function(e) {
								document.getElementById("html").focus();
							};
							//alert("set onfocus");
							//alert("added a listener to the content window's html thingy... or so we think");
						};*/
						document.getElementById("body").appendChild(frame);
						frame.style.zIndex = "999";
						var inst = document.getElementById("instructions");
						var instructions = inst.innerHTML;
						inst.innerHTML = "<p style=\"background-color:black;color:#00ff00;font-family:Courier;font-size:14px;z-index:999;padding-bottom:8px\">Click anywhere on this bar to close.</p>";
						inst.onclick = function() {
							var nice = document.getElementById("resume-nice");
							if(nice) {
								nice.parentNode.removeChild(nice);
								document.getElementById("cmd").value = "";
							}
							inst.onclick = "";
							inst.innerHTML = instructions;
						};
						frame.focus();
					}
					else {
						if(cmd.value == "cd" || cmd.value == "cd ~") {
							currDir = tree._root;
							prompt = getPrompt();
						}
						else if(cmd.value.substring(0,3) === "cd ") {
							var dir = currDir;
							var newPath = cmd.value.substring(3);
							var newDirs = newPath.split("/");
							var valid = true;
							var regexp;
							for(var i = 0; i < newDirs.length && newDirs[i].length > 0; i++) {
								regexp = new RegExp(newDirs[i]);
								if(i === 0 && newDirs[i] === "~") {
									dir = tree._root;
								}
								else if(newDirs[i] === "..") {
									if(dir.parent) dir = dir.parent;
									else {
										valid = false;
									}
								}
								else if(newDirs[i] !== ".") {
									for(var j = 0; j < dir.children.length; j++) {
										var found = false;
										if(regexp.test(dir.children[j].data.name)) {
											if(dir.children[j].data.type === "dir") {
												dir = dir.children[j];
												found = true;
											}
											else {
												found = true;
												valid = false;
											}
											break;
										}
									}
									if(!found) {
										valid = false;
									}
								}

							}
							if(!valid) {
								old.innerHTML += "<div contenteditable=\"false\" id=\"output"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier;font-size:14px;font-size:14px;resize: none;\"></div>";
								var lastOut = document.getElementById("output"+numCmds);
								if(found) lastOut.innerHTML = "cd: " + newPath + ": Not a directory";
								else lastOut.innerHTML = "cd: " + newPath + ": No such file or directory";
								outs[outs.length] = lastOut.innerHTML;
								//lastOut.rows = 1;
							}
							else {
								currDir = dir;
								prompt = getPrompt();
							}
						}
						else {
							old.innerHTML += "<div contenteditable=\"false\" id=\"output"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier;font-size:14px;font-size:14px;resize: none;\"></div>";
							var lastOut = document.getElementById("output"+numCmds);
							lastOut.innerHTML = "-bash: " + cmd.value.split(" ")[0] + ": command not found";
							outs[outs.length] = lastOut.innerHTML;
							//lastOut.rows = 1;
						}
					}
					var j = 0, k = 0;
					for(var i = 0; i < kids.length; i++) {
						if(kids[i].id.substring(0,6) == "output") {
							kids[i].value = outs[j];
							j++;
						}
						else if(kids[i].id.substring(0,3) == "cmd") {
							kids[i].rows = 1;
							kids[i].value = cmds[k];
							k++;
						}
					}
					cmd.value = "";
					numCmds++;
					document.getElementById("prompt").innerHTML = prompt;
					var inputBox = document.getElementById("terminal");
					var bottom = inputBox.scrollTop;
					do {
						bottom = inputBox.scrollTop;
						inputBox.scrollTop = inputBox.scrollTop+100;

					} while(bottom < inputBox.scrollTop);
 				}
 				else if(code == 13) {
 					var old = document.getElementById("old");
 					old.innerHTML += "<table style=\"width:100%\"><tr><td id=\"promptCell"+numCmds+"\" style=\"white-space:nowrap\"><div id=\"prompt"+numCmds+"\" style=\"background-color:black;color:#00ff00;font-family:Courier;font-size:14px;font-size:14px;resize: none;width:" + document.getElementById("promptCell").offsetWidth + "\">"+prompt+"</div></td><td><div contenteditable=\"false\" style=\"background-color:black;color:#00ff00;width:100%;font-family:Courier;font-size:14px;font-size:14px;resize: none;\" onfocus=\"javascript:document.getElementById('cmd').focus()\" rows=1>"+"</div></td></tr></table>"
 					var kids = old.childNodes;
 					var j = 0, k = 0;
					for(var i = 0; i < kids.length; i++) {
						if(kids[i].id.substring(0,6) == "output") {
							kids[i].value = outs[j];
							j++;
						}
						else if(kids[i].id.substring(0,3) == "cmd") {
							kids[i].rows = 1;
							kids[i].value = cmds[k];
							k++;
						}
					}
					var inputBox = document.getElementById("terminal");
					var bottom = inputBox.scrollTop;
					do {
						bottom = inputBox.scrollTop;
						inputBox.scrollTop = inputBox.scrollTop+1;

					} while(bottom != inputBox.scrollTop);
 				}
			}

			function processKey(e, textarea) {
				var code = (e.keyCode ? e.keyCode : e.which);
				var cmd = document.getElementById("cmd");
				//tab
				if(code === 9) {
					//implemented in processTab (on key down event).
				}
				//up arrow
				else if(code === 38) {
					if(numUp < cmds.length) {
						reused[numUp] = cmd.value;
						numUp++;
						reused[numUp] = cmds[cmds.length-numUp];
						cmd.value = reused[numUp];
					}
					moveCursorToEnd(cmd);
				}
				//down arrow
				else if(code === 40) {
					if(numUp > 0) {
						reused[numUp] = cmd.value;
						numUp--;
						cmd.value = reused[numUp];
					}
					moveCursorToEnd(cmd);
				}
				//enter
   				
				cmd.focus();
			}
			window.addEventListener("resize", function(event) {
				var cmdCell = document.getElementById("cmdCell");
				cmdCell.width = window.innerWidth - document.getElementById("promptCell").width;
				for(var i = 0; i < numCmds; i++) {
					document.getElementById("cmdCell" + i).width = window.innerWidth - document.getElementById("promptCell" + i).width;
				}
			});
			function refocus() {
				window.scrollTo(0,0);
				document.getElementById('cmd').focus();
			}
			//window.addEventListener("keydown", processKeyInner(event));
		</script>
		<div id="old" style="width:100vw;background-color:black"></div>
		<table id="command" style="width:100%"><tr><td id="promptCell"><div id="prompt" style="background-color:black;color:#00ff00;font-family:Courier;font-size:14px;font-size:14px;resize: none;width: auto;"><script>document.getElementById("prompt").innerHTML = prompt; document.getElementById("promptCell").style = "white-space:nowrap";</script></div></td><td id="cmdCell"><!--<textarea autofocus align="right" id="cmd" style="background-color:black;color:#00ff00;width:100%;font-family:Courier" rows=1 onKeyPress="processKey(event, this)"></textarea>--><input autofocus type="text" id="cmd" style="outline:none;background-color:black;color:#00ff00;width:100%;font-family:Courier;font-size:14px;resize: none;border:none" onKeyUp="processKey(event, this)" onKeyDown="processTab(event, this)" onkeypress="processEnter(event, this)"><script> document.getElementById("cmdCell").width = window.innerWidth - document.getElementById("promptCell").width; </script></td></tr></table>
	</div>
	<div id="dummy" contenteditable="true" onfocus="javascript:refocus()" onclick="javascript:refocus()"></div>
</body>
</html>