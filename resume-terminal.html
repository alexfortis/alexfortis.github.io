<!DOCTYPE html>
<html>
<head>
	<div style="background-color:black">
    <link href="favicon.ico" rel="shortcut icon">
    <link href="bootstrap-3.3.4-dist/css/bootstrap.css" rel="stylesheet">
    <link href="treeStuff.css" rel="stylesheet">
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html"><img src="alexstrong.jpg" style="width:30px;height:30px;display:inline"></img>&nbsp;Alexander Strong</a>
        </div>
	<div id="navbar" class="collapse navbar-collapse">
	  <ul class="nav navbar-nav">
	    <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About Me</a></li>
	    <li><a href="programs.html">Programs</a></li>
	    <li><a href="music.html">Music</a></li>
	    <li class="active"><a href="resume.html">Resume</a></li>
	  </ul>
	</div>
      </div>
    </nav>
    <style type="text/css">
    	textarea { border: none; }
	</style>
	<br><br><br><br><br>
	<div id="instructions" style="background-color:black">
		<p style="color:#00ff00;font-family:Courier New">This is my resume page. Type "help" to see a list of commands.</p></div>
	</div>
  </head>
<body>
	<div id="terminal" style="width:100vw;height:90vh;background-color:black;overflow-y:auto">
		<script>
			document.body.style.overflow="hidden";
			//TODO: make cd and cat commands actually do something... or do I even need cat? yes, for job experience
			//TODO: add pwd
			//TODO: organize the resume data into objects and stuff
			//TODO: make a shell prompt
			var numCmds = 0;
			var cmds = [];
			var outs = [];
			var bing = {name: "Binghamton University"};
			var bxsci = {name: "Bronx High School of Science"};
			var jyard = {name: "The Juilliard School, Pre-College Division"};
			var education = {name: "Education", contents: [bing, bxsci, jyard]};
			var skills = {name: "Skills"};
			var topLevel = [education, skills];
			var currLevel = topLevel;
			var rootDir = "resume";
			var currDir = rootDir;

			//found this here: http://www.javascripter.net/faq/browsern.htm
			function getAppName() {
				var nVer = navigator.appVersion;
				var nAgt = navigator.userAgent;
				var browserName  = navigator.appName;
				var fullVersion  = ''+parseFloat(navigator.appVersion); 
				var majorVersion = parseInt(navigator.appVersion,10);
				var nameOffset,verOffset,ix;

				// In Opera 15+, the true version is after "OPR/" 
				if ((verOffset=nAgt.indexOf("OPR/"))!=-1) {
				 browserName = "Opera";
				 fullVersion = nAgt.substring(verOffset+4);
				}
				// In older Opera, the true version is after "Opera" or after "Version"
				else if ((verOffset=nAgt.indexOf("Opera"))!=-1) {
				 browserName = "Opera";
				 fullVersion = nAgt.substring(verOffset+6);
				 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
				   fullVersion = nAgt.substring(verOffset+8);
				}
				// In MSIE, the true version is after "MSIE" in userAgent
				else if ((verOffset=nAgt.indexOf("MSIE"))!=-1) {
				 browserName = "Microsoft Internet Explorer";
				 fullVersion = nAgt.substring(verOffset+5);
				}
				// In Chrome, the true version is after "Chrome" 
				else if ((verOffset=nAgt.indexOf("Chrome"))!=-1) {
				 browserName = "Chrome";
				 fullVersion = nAgt.substring(verOffset+7);
				}
				// In Safari, the true version is after "Safari" or after "Version" 
				else if ((verOffset=nAgt.indexOf("Safari"))!=-1) {
				 browserName = "Safari";
				 fullVersion = nAgt.substring(verOffset+7);
				 if ((verOffset=nAgt.indexOf("Version"))!=-1) 
				   fullVersion = nAgt.substring(verOffset+8);
				}
				// In Firefox, the true version is after "Firefox" 
				else if ((verOffset=nAgt.indexOf("Firefox"))!=-1) {
				 browserName = "Firefox";
				 fullVersion = nAgt.substring(verOffset+8);
				}
				// In most other browsers, "name/version" is at the end of userAgent 
				else if ( (nameOffset=nAgt.lastIndexOf(' ')+1) < 
				          (verOffset=nAgt.lastIndexOf('/')) ) 
				{
				 browserName = nAgt.substring(nameOffset,verOffset);
				 fullVersion = nAgt.substring(verOffset+1);
				 if (browserName.toLowerCase()==browserName.toUpperCase()) {
				  browserName = navigator.appName;
				 }
				}
				// trim the fullVersion string at semicolon/space if present
				if ((ix=fullVersion.indexOf(";"))!=-1)
				   fullVersion=fullVersion.substring(0,ix);
				if ((ix=fullVersion.indexOf(" "))!=-1)
				   fullVersion=fullVersion.substring(0,ix);

				majorVersion = parseInt(''+fullVersion,10);
				if (isNaN(majorVersion)) {
				 fullVersion  = ''+parseFloat(navigator.appVersion); 
				 majorVersion = parseInt(navigator.appVersion,10);
				}
				return browserName;
			}
			var app = getAppName(); //not going to change, so why go through that method more than once?

			function getPrompt() {
				return app + ":alexfortis.github.io " + currDir + "$ ";
			}

			function processKey(e, textarea) {
				var code = (e.keyCode ? e.keyCode : e.which);
   				if(code == 13) { //Enter keycode
   					//alert(getPrompt());
   					//alert(navigator.appName);
   					var stuff = getPrompt();
   					//alert(stuff);
					var cmd = document.getElementById("cmd");
					cmd.value = cmd.value.trim();
					var term = document.getElementById("terminal");
					var old = document.getElementById("old");
					old.innerHTML += "<textarea font=\"courier\" readonly align=\"left\" id=\"cmd"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier New\"></textarea>";
					var prevCmd = document.getElementById("cmd"+numCmds);
					var kids = old.childNodes;
					cmds[cmds.length] = cmd.value;
					if(cmd.value.substring(0,2) != "cd" && cmd.value != "view") {
						old.innerHTML += "<textarea font=\"courier\" readonly align=\"left\" id=\"output"+numCmds+"\" style=\"background-color:black;color:#00ff00;width:100vw;font-family:Courier New\"></textarea>";
						var lastOut = document.getElementById("output"+numCmds);
						kids = old.childNodes;
						if(cmd.value == "help") {
							lastOut.rows = 5;
							lastOut.value = "\tls:\t\t\tlist all files and directories in this directory";
							lastOut.value += "\n\tcd [directory_name]:\tchange to the given directory";
							lastOut.value += "\n\tview:\t\t\tview my resume in a nicer (read: more traditional) format";
							lastOut.value += "\n\tcat [filename]:\t\tprint the contents of a given file"
							lastOut.value += "\n\thelp:\t\t\tshow this help dialog";
						}
						else if(cmd.value == "ls") {
							lastOut.rows = currLevel.length;
							if(currLevel.length > 0) lastOut.value += "\t" + currLevel[0].name;
							for(var count = 1; count < currLevel.length; count++) {
								lastOut.value += "\n\t" + currLevel[count].name;
							}
						}
						else if(cmd.value.substring(0,3) == "cat") {
							lastOut.rows = 1;
							lastOut.value = "\tcat: not yet implemented";
						}
						else {
							lastOut.rows = 1;
							lastOut.value = "Unknown command: " + cmd.value + ". Try again."
						}
						outs[outs.length]=lastOut.value;
					}
					else if(cmd.value == "view") {
						window.open("resume.html", "_blank");
					}
					else {
						alert("cd: not yet implemented");
					}
					var j = 0, k = 0;
					for(var i = 0; i < kids.length; i++) {
						if(kids[i].id.substring(0,6) == "output") {
							kids[i].value = outs[j];
							j++;
						}
						else if(kids[i].id.substring(0,3) == "cmd") {
							kids[i].rows = 1;
							kids[i].value = cmds[k];
							k++;
						}
					}
					cmd.value = "";
					numCmds++;
 				}
			}
		</script>
		<div id="old" style="width:100vw;background-color:black"></div>
		<textarea font="courier" autofocus align="left" id="cmd" style="background-color:black;color:#00ff00;width:100vw;font-family:Courier New" rows=1 onKeyPress="processKey(event, this)">
		</textarea>
	</div>
</body>
</html>